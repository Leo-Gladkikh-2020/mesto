(()=>{"use strict";var e=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t={};e(t);var n={};e(n);var o={};e(o);e({});var r={};e(r);var a={};e(a);var i={};e(i);var c={};e(c);var u={};e(u);var l=document.querySelector(".popup-edit"),d=document.querySelector(".popup-avatar"),p=document.querySelector(".popup-add"),s=document.querySelector(".popup-place"),f=document.querySelector(".popup-place-delete"),m=document.querySelector(".popup__form-edit"),v=document.querySelector(".popup__form-avatar"),y=document.querySelector(".popup__form-add"),h=document.querySelector(".profile__edit-btn"),_=document.querySelector(".profile__avatar-btn"),g=document.querySelector(".profile__add-btn"),b=document.querySelector(".profile__name"),S=document.querySelector(".profile__subtitle"),L=document.querySelector(".popup__input_text_name"),q=document.querySelector(".popup__input_text_about"),w=document.querySelector(".elements__list"),C=document.querySelector(".template"),I={formSelector:".popup__form",inputSelector:".popup__input",inputErrorClass:"popup__input_text_error",submitButtonSelector:".popup__save-btn",submitButtonErrorClass:"popup__save-btn_invalid"};function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A=new u.Api({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-32",headers:{authorization:"834693d9-1821-4fba-aca9-8dc02ca9ce04","Content-Type":"application/json"}});function E(e){var n=new t.Card(e,".template",V,{handleDeleteIconClick:function(e){i.PopupWithConfirmation.open(),i.PopupWithConfirmation.setSubmitAction((function(){A.deleteCard(data).then((function(t){e.deleteCard(t),i.PopupWithConfirmation.close()})).catch((function(e){console.log(e)}))}))},addLike:function(){A.addLike(data).then((function(e){n.number(e),console.log(e)})).catch((function(e){console.log(e)}))},deleteLike:function(){A.deleteLike(data).then((function(e){n.number(e),console.log(e)})).catch((function(e){console.log(e)}))}},C);return n.generateCard()}var P=new o.Section({renderer:function(e){var t=E(e);P.addItem(t)}},w),F=new r.PopupWithImage(s);function V(e,t){F.open(e,t)}F.setEventListeners();var k=new a.PopupWithForm(l,{submitForm:function(e){k.renderLoading(!0),A.changeUserInfo(e).then((function(e){x.changeUserInfo(e),console.log(e),k.close()})).catch((function(e){console.log(e)})).finally((function(){k.renderLoading(!1)}))}});k.setEventListeners();var W=new a.PopupWithForm(d,{submitForm:function(e){W.renderLoading(!0),A.changeUserAvatar(e).then((function(e){x.changeUserAvatar(e),console.log(e),W.close()})).catch((function(e){console.log(e)})).finally((function(){W.renderLoading(!1)}))}});W.setEventListeners();var j=new a.PopupWithForm(p,{submitForm:function(e){j.renderLoading(!0),A.addCard(e).then((function(e){var t=E(e);P.addItem(t),console.log(e),j.close()})).catch((function(e){console.log(e)})).finally((function(){j.renderLoading(!1)}))}});j.setEventListeners(),new i.PopupWithConfirmation(f).setEventListeners();var x=new c.UserInfo({nameUser:b,aboutUser:S});Promise.all([A.getUserInfo(),A.getInitialCards()]).then((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[0],a=o[1];x.changeUserInfo(r),x.changeUserAvatar(r),P.renderItems(a)})).catch((function(e){console.log(e)})),h.addEventListener("click",(function(){var e=x.getUserInfo();L.value=e.name,q.value=e.about,M.resetValidation(),k.open()})),_.addEventListener("click",(function(){T.resetValidation(),W.open()})),g.addEventListener("click",(function(){O.resetValidation(),j.open()}));var O=new n.FormValidator(I,y);O.enableValidation();var T=new n.FormValidator(I,v);T.enableValidation();var M=new n.FormValidator(I,m);M.enableValidation()})();