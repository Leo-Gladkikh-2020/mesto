(()=>{"use strict";var e=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t={};e(t);var n={};e(n);var o={};e(o);e({});var r={};e(r);var a={};e(a);var i={};e(i);var c={};e(c);var u={};e(u);var l=document.querySelector(".popup-edit"),d=document.querySelector(".popup-avatar"),p=document.querySelector(".popup-add"),s=document.querySelector(".popup-place"),f=document.querySelector(".popup-place-delete"),m=document.querySelector(".popup__form-edit"),v=document.querySelector(".popup__form-avatar"),y=document.querySelector(".popup__form-add"),h=document.querySelector(".profile__edit-btn"),_=document.querySelector(".profile__avatar-btn"),g=document.querySelector(".profile__add-btn"),b=document.querySelector(".profile__name"),S=document.querySelector(".profile__subtitle"),L=document.querySelector(".popup__input_text_name"),q=document.querySelector(".popup__input_text_about"),w=document.querySelector(".elements__list"),C=document.querySelector(".template"),I={formSelector:".popup__form",inputSelector:".popup__input",inputErrorClass:"popup__input_text_error",submitButtonSelector:".popup__save-btn",submitButtonErrorClass:"popup__save-btn_invalid"};function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function A(e){var n=new t.Card(e,".template",W,{handleDeleteIconClick:function(e){i.PopupWithConfirmation.open(),i.PopupWithConfirmation.setSubmitAction((function(){M.deleteCard(data).then((function(t){e.deleteCard(t),i.PopupWithConfirmation.close()})).catch((function(e){console.log(e)}))}))},addLike:function(){M.addLike(data).then((function(e){n.number(e),console.log(e)})).catch((function(e){console.log(e)}))},deleteLike:function(){M.deleteLike(data).then((function(e){n.number(e),console.log(e)})).catch((function(e){console.log(e)}))}},C);return n.generateCard()}h.addEventListener("click",(function(){j.open();var e=T.getUserInfo();L.value=e.name,q.value=e.about,F.resetValidation()})),_.addEventListener("click",(function(){x.open(),P.resetValidation()})),g.addEventListener("click",(function(){O.open(),E.resetValidation()}));var E=new n.FormValidator(I,y);E.enableValidation();var P=new n.FormValidator(I,v);P.enableValidation();var F=new n.FormValidator(I,m);F.enableValidation();var V=new o.Section({renderer:function(e){var t=A(e);V.addItem(t)}},w),k=new r.PopupWithImage(s);function W(e,t){k.open(e,t)}k.setEventListeners();var j=new a.PopupWithForm(l,{submitForm:function(e){j.renderLoading(!0),M.changeUserInfo(e).then((function(e){T.changeUserInfo(e),console.log(e),j.close()})).catch((function(e){console.log(e)})).finally((function(){j.renderLoading(!1)}))}});j.setEventListeners();var x=new a.PopupWithForm(d,{submitForm:function(e){x.renderLoading(!0),M.changeUserAvatar(e).then((function(e){T.changeUserAvatar(e),console.log(e),x.close()})).catch((function(e){console.log(e)})).finally((function(){x.renderLoading(!1)}))}});x.setEventListeners();var O=new a.PopupWithForm(p,{submitForm:function(e){O.renderLoading(!0),M.addCard(e).then((function(e){var t=A(e);V.addItem(t),console.log(e),O.close()})).catch((function(e){console.log(e)})).finally((function(){O.renderLoading(!1)}))}});O.setEventListeners(),new i.PopupWithConfirmation(f).setEventListeners();var T=new c.UserInfo({nameUser:b,aboutUser:S}),M=new u.Api({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-32",headers:{authorization:"834693d9-1821-4fba-aca9-8dc02ca9ce04","Content-Type":"application/json"}});Promise.all([M.getUserInfo(),M.getInitialCards()]).then((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw r}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[0],a=o[1];T.changeUserInfo(r),T.changeUserAvatar(r),V.renderItems(a)})).catch((function(e){console.log(e)}))})();